<% function render_category_chain(cat) { %>
  <span class="category-chain-item"><%= cat.name.trim() %></span>
<% } %>

<span class="category-chains">
  <% var catsFirst = categories.find({ parent: { $exists: false } }).sort(config.index_generator.order_by || 'name').filter(cat => cat.length) %>
  <% catsFirst.each((cat, idx) => { %>
    <% if (typeof(limit) === "undefined" || idx < limit) { %>
      <span class="category-chain">
        <%- render_category_chain(cat) %>
      </span>
    <% } %>
  <% }) %>
</span>
